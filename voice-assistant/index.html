<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üåæ CropShield</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  text-align: center;
  margin-top: 40px;
}
h1 { font-size: 40px; }
select, button {
  font-size: 18px;
  padding: 10px 16px;
  margin-top: 12px;
  width: 300px;
}
#result {
  margin-top: 25px;
  font-size: 18px;
  font-weight: bold;
}
</style>
</head>

<body>

<h1>üåæ CropShield</h1>
<p>Smart Multilingual Farming Assistant</p>

<select id="lang">
  <option value="en">English</option>
  <option value="hi">Hindi</option>
  <option value="te">Telugu</option>
</select>
<br>

<button onclick="startListening()">üé§ Speak</button>

<div id="result"></div>

<script>
/* ---------- SPEECH (FORCED ENGLISH INPUT) ---------- */
const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SR();
recognition.lang = "en-IN";
recognition.interimResults = false;

function startListening() {
  recognition.start();
}

recognition.onresult = function (event) {
  const input = normalize(event.results[0][0].transcript);
  respond(input);
};

function normalize(t){
  return t.toLowerCase().replace(/[.,!?]/g,"");
}

function hasAny(input, words){
  return words.some(w => input.includes(w));
}

/* ---------- CORE LOGIC ---------- */
function respond(input){
  const lang = document.getElementById("lang").value;
  let reply = "";

  /* CROPS */
  const rice   = hasAny(input, ["rice","paddy","dhan","dhaan","vari"]);
  const wheat  = hasAny(input, ["wheat","gehun","godhuma"]);
  const cotton = hasAny(input, ["cotton","kapas","patti"]);

  /* INTENTS */
  const fertilizer = hasAny(input, ["fertilizer","fertiliser","urea","dap","npk","khaad","khad","eruvu"]);
  const pest = hasAny(input, ["pest","keet","purugu","insect","rog","tegulu"]);
  const water = hasAny(input, ["water","irrigation","paani","neeru"]);
  const growth = hasAny(input, ["poor","low","kam","takkuva","growth","yield","paidavar"]);
  const rain = hasAny(input, ["rain","barish","varsham","spray"]);
  const punjab = hasAny(input, ["punjab"]);
  const mh = hasAny(input, ["maharashtra"]);
  const ts = hasAny(input, ["telangana"]);

  /* ---------- STATE ---------- */
  if (punjab || mh || ts) {
    if (punjab)
      reply = lang==="hi" ? "‡§™‡§Ç‡§ú‡§æ‡§¨ ‡§Æ‡•á‡§Ç ‡§ó‡•á‡§π‡•Ç‡§Ç ‡§î‡§∞ ‡§ß‡§æ‡§® ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§´‡§∏‡§≤‡•á‡§Ç ‡§π‡•à‡§Ç‡•§"
            : lang==="te" ? "‡∞™‡∞Ç‡∞ú‡∞æ‡∞¨‡±ç‚Äå‡∞≤‡±ã ‡∞ó‡±ã‡∞ß‡±Å‡∞Æ ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞µ‡∞∞‡∞ø ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å."
            : "Punjab mainly grows wheat and rice.";
    else if (mh)
      reply = lang==="hi" ? "‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§™‡§æ‡§∏ ‡§î‡§∞ ‡§ó‡§®‡•ç‡§®‡§æ ‡§â‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§"
            : lang==="te" ? "‡∞Æ‡∞π‡∞æ‡∞∞‡∞æ‡∞∑‡±ç‡∞ü‡±ç‡∞∞‡∞≤‡±ã ‡∞™‡∞§‡±ç‡∞§‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ö‡±Ü‡∞∞‡∞ï‡±Å ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å."
            : "Maharashtra grows cotton and sugarcane.";
    else
      reply = lang==="hi" ? "‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§ß‡§æ‡§® ‡§î‡§∞ ‡§ï‡§™‡§æ‡§∏ ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§´‡§∏‡§≤‡•á‡§Ç ‡§π‡•à‡§Ç‡•§"
            : lang==="te" ? "‡∞§‡±Ü‡∞≤‡∞Ç‡∞ó‡∞æ‡∞£‡∞≤‡±ã ‡∞µ‡∞∞‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡∞§‡±ç‡∞§‡∞ø ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å."
            : "Telangana mainly grows rice and cotton.";
  }

  /* ---------- FERTILISER (FIXED & STRICT) ---------- */
  else if (fertilizer && rice) {
    reply = lang==="hi"
      ? "‡§ß‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡•Ä‡§è‡§™‡•Ä ‡§¨‡•Å‡§µ‡§æ‡§à ‡§Æ‡•á‡§Ç ‡§î‡§∞ ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§¶‡•ã ‡§ï‡§ø‡§∏‡•ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞µ‡∞∞‡∞ø ‡∞™‡∞Ç‡∞ü‡∞ï‡±Å ‡∞°‡±Ä‡∞è‡∞™‡±Ä ‡∞¨‡±á‡∞∏‡∞≤‡±ç‚Äå‡∞ó‡∞æ, ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ‡∞®‡±Å ‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞µ‡∞ø‡∞°‡∞§‡∞≤‡±Å‡∞ó‡∞æ ‡∞µ‡±á‡∞Ø‡∞æ‡∞≤‡∞ø."
      : "For rice, apply DAP at sowing and urea in two split doses.";
  }

  else if (fertilizer && wheat) {
    reply = lang==="hi"
      ? "‡§ó‡•á‡§π‡•Ç‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•Å‡§µ‡§æ‡§à ‡§Æ‡•á‡§Ç ‡§°‡•Ä‡§è‡§™‡•Ä ‡§î‡§∞ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§¶‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞ó‡±ã‡∞ß‡±Å‡∞Æ ‡∞™‡∞Ç‡∞ü‡∞ï‡±Å ‡∞°‡±Ä‡∞è‡∞™‡±Ä ‡∞¨‡±á‡∞∏‡∞≤‡±ç‚Äå‡∞ó‡∞æ, ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞™‡±à‡∞µ‡±á‡∞≥ ‡∞µ‡±á‡∞Ø‡∞æ‡∞≤‡∞ø."
      : "For wheat, apply DAP at sowing and urea as top dressing.";
  }

  else if (fertilizer && cotton) {
    reply = lang==="hi"
      ? "‡§ï‡§™‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§™‡•ã‡§ü‡§æ‡§∂ ‡§∏‡§Ç‡§§‡•Å‡§≤‡§ø‡§§ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞™‡∞§‡±ç‡∞§‡∞ø ‡∞™‡∞Ç‡∞ü‡∞ï‡±Å ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡±ä‡∞ü‡∞æ‡∞∑‡±ç ‡∞∏‡∞∞‡±à‡∞® ‡∞Æ‡±ã‡∞§‡∞æ‡∞¶‡±Å‡∞≤‡±ã ‡∞µ‡∞æ‡∞°‡∞æ‡∞≤‡∞ø."
      : "For cotton, apply urea and potash in balanced quantity.";
  }

  else if (fertilizer) {
    reply = lang==="hi"
      ? "‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¨‡§§‡§æ‡§è‡§Ç‡•§"
      : lang==="te"
      ? "‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞™‡∞Ç‡∞ü ‡∞™‡±á‡∞∞‡±Å ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞Ç‡∞°‡∞ø."
      : "Please mention the crop name.";
  }

  /* ---------- PEST ---------- */
  else if (pest) {
    reply = lang==="hi"
      ? "‡§®‡•Ä‡§Æ ‡§§‡•á‡§≤ ‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å‡∞≤ ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞£‡∞ï‡±Å ‡∞®‡±á‡∞Æ‡±ç ‡∞Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø."
      : "Use neem oil or recommended pesticide.";
  }

  /* ---------- WATER ---------- */
  else if (water) {
    reply = lang==="hi"
      ? "‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞™‡∞Ç‡∞ü ‡∞¶‡∞∂‡∞®‡±Å ‡∞¨‡∞ü‡±ç‡∞ü‡∞ø ‡∞®‡±Ä‡∞∞‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞æ‡∞≤‡∞ø."
      : "Irrigate crops based on growth stage.";
  }

  /* ---------- GROWTH ---------- */
  else if (growth) {
    reply = lang==="hi"
      ? "‡§ï‡§Æ ‡§™‡•à‡§¶‡§æ‡§µ‡§æ‡§∞ ‡§™‡•ã‡§∑‡§ï ‡§§‡§§‡•ç‡§µ ‡§Ø‡§æ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§∏‡•á ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§"
      : lang==="te"
      ? "‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø ‡∞™‡±ã‡∞∑‡∞ï ‡∞≤‡±ã‡∞™‡∞Ç ‡∞µ‡∞≤‡±ç‡∞≤ ‡∞ï‡∞æ‡∞µ‡∞ö‡±ç‡∞ö‡±Å."
      : "Low yield may be due to nutrient or water deficiency.";
  }

  /* ---------- WEATHER ---------- */
  else if (rain) {
    reply = lang==="hi"
      ? "‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç‡∞≤‡±ã ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞µ‡∞¶‡±ç‡∞¶‡±Å."
      : "Avoid spraying during rain.";
  }

  /* ---------- FALLBACK ---------- */
  else {
    reply = lang==="hi"
      ? "‡§ï‡•É‡§™‡§Ø‡§æ ‡§ñ‡•á‡§§‡•Ä ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§"
      : lang==="te"
      ? "‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞ø‡∞Ç‡∞ö‡∞ø‡∞® ‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞® ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø."
      : "Please ask a farming related question.";
  }

  document.getElementById("result").innerText = reply;
  speak(reply, lang);
}

/* ---------- VOICE OUTPUT ---------- */
function speak(text, lang){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = lang==="hi" ? "hi-IN" : lang==="te" ? "te-IN" : "en-IN";
  speechSynthesis.speak(u);
}
</script>

</body>
</html>





