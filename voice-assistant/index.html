<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CropShield ‚Äì Smart Farming Voice Assistant</title>

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin-top: 40px;
  }
  h1 { font-size: 34px; }
  select, button {
    font-size: 18px;
    padding: 10px 20px;
    margin-top: 15px;
  }
  #heard, #answer {
    margin-top: 20px;
    font-size: 18px;
  }
</style>
</head>

<body>

<h1>üåæ CropShield</h1>
<p>Smart Multilingual Farming Assistant</p>

<select id="lang">
  <option value="en-IN">English</option>
  <option value="hi-IN">Hindi</option>
  <option value="te-IN">Telugu</option>
</select>
<br>

<button onclick="startListening()">üé§ Speak</button>

<div id="heard"></div>
<div id="answer"></div>

<script>
/* ================= SPEECH SETUP ================= */
const SpeechRecognition =
  window.SpeechRecognition || window.webkitSpeechRecognition;

const recognition = new SpeechRecognition();
recognition.continuous = false;
recognition.interimResults = false;

function startListening() {
  recognition.lang = document.getElementById("lang").value;
  recognition.start();
}

recognition.onresult = function (event) {
  const input = event.results[0][0].transcript.toLowerCase();
  document.getElementById("heard").innerText = "You said: " + input;
  respond(input);
};

/* ================= KNOWLEDGE BASE ================= */
const crops = {
  rice: "Rice grows well in kharif season with adequate rainfall.",
  wheat: "Wheat is a rabi crop and needs cool climate.",
  cotton: "Cotton requires warm climate and careful pest management.",
  maize: "Maize can be grown in both kharif and rabi seasons."
};

const fertilizers = {
  rice: "Rice requires urea and DAP in split doses.",
  wheat: "Wheat needs nitrogen-rich fertiliser like urea.",
  cotton: "Cotton benefits from NPK and potash.",
  maize: "Maize needs balanced NPK fertiliser."
};

const pests = {
  rice: "Common rice pests include stem borer and leaf folder.",
  wheat: "Aphids and termites affect wheat crops.",
  cotton: "Cotton bollworm is a major pest.",
  maize: "Fall armyworm affects maize."
};

const states = {
  maharashtra: "Maharashtra supports cotton, soybean and maize.",
  telangana: "Telangana mainly grows rice, cotton and maize.",
  andhra: "Andhra Pradesh grows rice, chilli and pulses.",
  punjab: "Punjab is known for wheat and rice."
};

/* ================= LOGIC ENGINE ================= */
function respond(input) {
  const lang = document.getElementById("lang").value;
  let reply = "";

  function findKey(obj) {
    return Object.keys(obj).find(k => input.includes(k));
  }

  const crop = findKey(crops);
  const state = findKey(states);
  const isRain = input.includes("rain") || input.includes("barish") || input.includes("varsham");
  const isSpray = input.includes("spray") || input.includes("chhidkaav");
  const isPest = input.includes("pest") || input.includes("keet") || input.includes("purugu");
  const isFert = input.includes("fertilizer") || input.includes("khaad") || input.includes("eruvu");

  /* ---------- ENGLISH ---------- */
  if (lang === "en-IN") {
    if (state && crop)
      reply = states[state] + " " + crops[crop];
    else if (isRain)
      reply = "Rain affects spraying and irrigation. Avoid spraying during rainfall.";
    else if (isSpray)
      reply = "Spraying should be done in dry and calm weather.";
    else if (isPest && crop)
      reply = pests[crop];
    else if (isFert && crop)
      reply = fertilizers[crop];
    else if (crop)
      reply = crops[crop];
    else if (state)
      reply = states[state];
    else
      reply = "Follow proper crop selection, fertilisation and pest management for better yield.";
  }

  /* ---------- HINDI ---------- */
  if (lang === "hi-IN") {
    if (state && crop)
      reply = states[state] + " ‡§Æ‡•á‡§Ç " + crops[crop];
    else if (isRain)
      reply = "‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§";
    else if (isSpray)
      reply = "‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§∏‡§æ‡§´ ‡§î‡§∞ ‡§∏‡•Ç‡§ñ‡•á ‡§Æ‡•å‡§∏‡§Æ ‡§Æ‡•á‡§Ç ‡§ï‡§∞‡•á‡§Ç‡•§";
    else if (isPest && crop)
      reply = pests[crop];
    else if (isFert && crop)
      reply = fertilizers[crop];
    else if (crop)
      reply = crops[crop];
    else if (state)
      reply = states[state];
    else
      reply = "‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§™‡•à‡§¶‡§æ‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡§∏‡§≤ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡•§";
  }

  /* ---------- TELUGU ---------- */
  if (lang === "te-IN") {
    if (state && crop)
      reply = states[state] + " ‡∞≤‡±ã " + crops[crop];
    else if (isRain)
      reply = "‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç ‡∞∏‡∞Æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞µ‡∞¶‡±ç‡∞¶‡±Å.";
    else if (isSpray)
      reply = "‡∞é‡∞Ç‡∞°‡∞ó‡∞æ ‡∞â‡∞®‡±ç‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø.";
    else if (isPest && crop)
      reply = pests[crop];
    else if (isFert && crop)
      reply = fertilizers[crop];
    else if (crop)
      reply = crops[crop];
    else if (state)
      reply = states[state];
    else
      reply = "‡∞Æ‡∞Ç‡∞ö‡∞ø ‡∞¶‡∞ø‡∞ó‡±Å‡∞¨‡∞°‡∞ø‡∞ï‡∞ø ‡∞∏‡∞∞‡±à‡∞® ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡±Å‡∞≤‡±Å ‡∞™‡∞æ‡∞ü‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ø.";
  }

  document.getElementById("answer").innerText = reply;
  speak(reply, lang);
}

/* ================= SPEECH OUTPUT ================= */
function speak(text, lang) {
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = lang;
  window.speechSynthesis.speak(msg);
}
</script>

</body>
</html>





