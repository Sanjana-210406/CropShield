<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CropShield ‚Äì Voice Assistant</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 40px;
    }
    h1 {
      font-size: 32px;
    }
    select, button {
      font-size: 18px;
      padding: 10px 20px;
      margin-top: 15px;
    }
    #text, #result {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>

<body>

<h1>üåæ CropShield</h1>
<p>Multilingual Voice Farming Assistant (Desktop Demo)</p>

<select id="languageSelect">
  <option value="en">English</option>
  <option value="hi">Hindi</option>
  <option value="te">Telugu</option>
</select>
<br>

<button onclick="startListening()">üé§ Speak</button>

<div id="text"></div>
<div id="result"></div>

<script>
/* ================= SPEECH SETUP ================= */
const SpeechRecognition =
  window.SpeechRecognition || window.webkitSpeechRecognition;

const recognition = new SpeechRecognition();

/* Always listen in English for desktop reliability */
recognition.lang = "en-IN";
recognition.continuous = false;
recognition.interimResults = false;

function startListening() {
  recognition.start();
}

recognition.onresult = function (event) {
  const spokenText = event.results[0][0].transcript.toLowerCase();
  document.getElementById("text").innerText =
    "You said: " + spokenText;
  processLogic(spokenText);
};

recognition.onerror = function () {
  document.getElementById("result").innerText =
    "Speech not detected. Please speak clearly.";
};

/* ================= MAIN LOGIC ================= */
function processLogic(input) {
  const lang = document.getElementById("languageSelect").value;
  let reply = "";

  /* ============ ENGLISH ============ */
  if (lang === "en") {

    if (input.includes("rain")) {
      reply = "Rain is expected. Avoid spraying today.";
    }
    else if (input.includes("spray")) {
      reply = "Weather is suitable. You can spray today.";
    }
    else if (input.includes("kharif")) {
      reply = "Kharif crops include rice, cotton, maize and groundnut.";
    }
    else if (input.includes("rabi")) {
      reply = "Rabi crops include wheat, mustard, barley and gram.";
    }
    else if (input.includes("fertilizer") || input.includes("urea")) {
      reply = "Use balanced fertilizer like urea, DAP or NPK.";
    }
    else if (input.includes("pest") || input.includes("disease")) {
      reply = "Common pests include stem borer and aphids.";
    }
    else {
      reply = "Ask about crops, fertiliser, pests, rain or spraying.";
    }

    speak(reply, "en-IN");
  }

  /* ============ HINDI (HINGLISH INPUT ‚Äì FIXED) ============ */
  if (lang === "hi") {

    // üåßÔ∏è Rain
    if (
      input.includes("barish") ||
      input.includes("baarish") ||
      input.includes("rain")
    ) {
      reply = "‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§ï‡•Ä ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ ‡§π‡•à‡•§ ‡§Ü‡§ú ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§";
    }

    // üöø Spray
    else if (
      input.includes("spray") ||
      input.includes("chhidkaav") ||
      input.includes("chhidkav")
    ) {
      reply = "‡§Æ‡•å‡§∏‡§Æ ‡§Ö‡§®‡•Å‡§ï‡•Ç‡§≤ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§∏‡•ç‡§™‡•ç‡§∞‡•á ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§";
    }

    // üå± Kharif
    else if (input.includes("kharif")) {
      reply = "‡§ñ‡§∞‡•Ä‡§´ ‡§´‡§∏‡§≤‡•á‡§Ç ‡§ß‡§æ‡§®, ‡§ï‡§™‡§æ‡§∏ ‡§î‡§∞ ‡§Æ‡§ï‡•ç‡§ï‡§æ ‡§π‡•à‡§Ç‡•§";
    }

    // üå± Rabi
    else if (input.includes("rabi")) {
      reply = "‡§∞‡§¨‡•Ä ‡§´‡§∏‡§≤‡•á‡§Ç ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§ö‡§®‡§æ ‡§î‡§∞ ‡§∏‡§∞‡§∏‡•ã‡§Ç ‡§π‡•à‡§Ç‡•§";
    }

    // üß™ Fertiliser
    else if (
      input.includes("fertilizer") ||
      input.includes("khaad") ||
      input.includes("khad") ||
      input.includes("urea") ||
      input.includes("dap")
    ) {
      reply = "‡§ß‡§æ‡§® ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§°‡•Ä‡§è‡§™‡•Ä ‡§ï‡§æ ‡§∏‡§Ç‡§§‡•Å‡§≤‡§ø‡§§ ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§";
    }

    // üêõ Pest / Disease
    else if (
      input.includes("keet") ||
      input.includes("keetanu") ||
      input.includes("rog") ||
      input.includes("pest") ||
      input.includes("disease")
    ) {
      reply = "‡§§‡§®‡§æ ‡§õ‡•á‡§¶‡§ï ‡§î‡§∞ ‡§Æ‡§æ‡§π‡•Ç ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•Ä‡§ü ‡§π‡•à‡§Ç‡•§ ‡§®‡•Ä‡§Æ ‡§§‡•á‡§≤ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§";
    }

    else {
      reply = "‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•å‡§∏‡§Æ, ‡§´‡§∏‡§≤, ‡§ñ‡§æ‡§¶ ‡§Ø‡§æ ‡§∞‡•ã‡§ó ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§";
    }

    speak(reply, "hi-IN");
  }

  /* ============ TELUGU (ROMANIZED INPUT) ============ */
  if (lang === "te") {

    if (input.includes("varsham") || input.includes("rain")) {
      reply = "‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç ‡∞µ‡∞ö‡±ç‡∞ö‡±á ‡∞Ö‡∞µ‡∞ï‡∞æ‡∞∂‡∞Ç ‡∞â‡∞Ç‡∞¶‡∞ø. ‡∞à‡∞∞‡±ã‡∞ú‡±Å ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞µ‡∞¶‡±ç‡∞¶‡±Å.";
    }
    else if (input.includes("spray") || input.includes("cheyacha")) {
      reply = "‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞Ö‡∞®‡±Å‡∞ï‡±Ç‡∞≤‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø. ‡∞∏‡±ç‡∞™‡±ç‡∞∞‡±á ‡∞ö‡±á‡∞Ø‡∞µ‡∞ö‡±ç‡∞ö‡±Å.";
    }
    else if (input.includes("kharif")) {
      reply = "‡∞ñ‡∞∞‡±Ä‡∞´‡±ç ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞µ‡∞∞‡∞ø, ‡∞™‡∞§‡±ç‡∞§‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞®.";
    }
    else if (input.includes("rabi")) {
      reply = "‡∞∞‡∞¨‡±Ä ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞ó‡±ã‡∞ß‡±Å‡∞Æ ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∂‡±Ü‡∞®‡∞ó‡∞≤‡±Å.";
    }
    else if (
      input.includes("eruvu") ||
      input.includes("fertilizer") ||
      input.includes("urea")
    ) {
      reply = "‡∞™‡∞Ç‡∞ü‡∞ï‡±Å ‡∞Ö‡∞®‡±Å‡∞ó‡±Å‡∞£‡∞Ç‡∞ó‡∞æ ‡∞Ø‡±Ç‡∞∞‡∞ø‡∞Ø‡∞æ ‡∞≤‡±á‡∞¶‡∞æ ‡∞é‡∞®‡±ç‚Äå‡∞™‡±Ä‡∞ï‡±á ‡∞µ‡∞æ‡∞°‡∞æ‡∞≤‡∞ø.";
    }
    else if (
      input.includes("purugu") ||
      input.includes("tegulu") ||
      input.includes("pest") ||
      input.includes("disease")
    ) {
      reply = "‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞™‡±Å‡∞∞‡±Å‡∞ó‡±Å‡∞≤‡±Å ‡∞∏‡±ç‡∞ü‡±Ü‡∞Ç ‡∞¨‡±ã‡∞∞‡∞∞‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ü‡∞´‡∞ø‡∞°‡±ç‡∞∏‡±ç.";
    }
    else {
      reply = "‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞≤‡±á‡∞¶‡∞æ ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø.";
    }

    speak(reply, "te-IN");
  }

  document.getElementById("result").innerText = reply;
}

/* ================= VOICE OUTPUT ================= */
function speak(text, lang) {
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = lang;
  window.speechSynthesis.speak(msg);
}
</script>

</body>
</html>

